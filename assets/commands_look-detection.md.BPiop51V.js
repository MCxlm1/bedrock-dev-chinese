import{_ as n}from"./chunks/1.BhvMAOul.js";import{_ as l,E as c,j as r,k as d,a5 as s,A as t,I as a,J as o}from"./chunks/framework.3Z9w-w8R.js";const p="/assets/images/commands/look-detection/visualisation.gif",u="/assets/images/commands/look-detection/v2-demo.gif",w=JSON.parse('{"title":"Look Detection","description":"This command-technique allows you to detect when a target looks at a player/entity/coordinate and subsequently run your desired commands.","frontmatter":{"title":"Look Detection","category":"Techniques","tags":["intermediate"],"mentions":["BedrockCommands","AjaxGb","Plagiatus","zheaEvyline","GobbleCrow"],"description":"This command-technique allows you to detect when a target looks at a player/entity/coordinate and subsequently run your desired commands."},"headers":[{"level":2,"title":"Introduction","slug":"introduction","link":"#introduction","children":[]},{"level":2,"title":"Command","slug":"command","link":"#command","children":[]},{"level":2,"title":"Calculate Viewing Angle","slug":"calculate-viewing-angle","link":"#calculate-viewing-angle","children":[]},{"level":2,"title":"Look Detection V2","slug":"look-detection-v2","link":"#look-detection-v2","children":[{"level":3,"title":"Customizing for Block Coordinates","slug":"customizing-for-block-coordinates","link":"#customizing-for-block-coordinates","children":[]}]}],"relativePath":"commands/look-detection.md","filePath":"commands/look-detection.md"}'),h={name:"commands/look-detection.md"};function m(g,e,k,y,f,b){const i=c("CodeHeader");return d(),r("div",null,[e[5]||(e[5]=s('<h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p><a href="https://bedrockcommands.org/" target="_blank" rel="noreferrer">Sourced by the Bedrock Commands Community (BCC) Discord</a></p><p><strong>Credits:</strong> <em>@AjaxGb</em></p><p>This command-technique allows you to detect when a target looks at a player/entity/coordinate and subsequently run your desired commands.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>This technique does not account for obstructions in the view direction, such as a wall or tree that prevents the player from seeing the desired target or block. To account for that, you must use a <strong><a href="https://bedrockcommands.org/resources/raycasting" target="_blank" rel="noreferrer">Raycasting System</a></strong></p></div><h2 id="command" tabindex="-1">Command <a class="header-anchor" href="#command" aria-label="Permalink to &quot;Command&quot;">​</a></h2>',6)),t(i,null,{default:a(()=>e[0]||(e[0]=[o("BP/functions/wiki/detect_state/player/is_looking_at.mcfunction")])),_:1}),e[6]||(e[6]=s('<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF;">execute as &lt;target&gt; at @s anchored eyes facing &lt;entity | coordinate&gt; positioned ^^^1 positioned ~~-1.62~ rotated as @s positioned ^^^-1 if entity @s[r=0.2] run &lt;command&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+n+'" alt="A Repeating Command Block"></p><p><strong>Visualisation:</strong></p><p><img src="'+p+'" alt="Alex Looking at a Pig&#39;s Head"></p><blockquote><p><em>Note: This is a rough visual representation, not precise measurements.</em></p></blockquote><p><strong>Command Breakdown:</strong></p><ul><li><code class="shiki"><span>as &lt;target&gt;</span></code><ul><li>sets the execution target. Example: <ul><li><code class="shiki"><span>as @p</span></code> (closest player)</li><li><code class="shiki"><span>as @e[type=zombie]</span></code> (all zombies)</li></ul></li></ul></li><li><code class="shiki"><span>at @s</span></code><ul><li>sets the execution position to the target&#39;s feet.</li></ul></li><li><code class="shiki"><span>anchored eyes</span></code><ul><li>brings the execution position up to the target&#39;s eye level.</li></ul></li><li><code class="shiki"><span>facing &lt;entity | coordinate&gt;</span></code><ul><li>sets the execution rotation facing an entity or coordinate. Example: <ul><li><code class="shiki"><span>facing 0 0 0</span></code> facing coordinate: 0,0,0.</li><li><code class="shiki"><span>facing entity @e[type=pig,c=1] eyes</span></code> (facing eyes of nearest pig)</li><li><code class="shiki"><span>facing entity @e[type=cow,r=30] feet</span></code> (facing eyes of cows in a 30 block radius)</li><li><code class="shiki"><span>facing entity @e[type=zombie] feet</span></code> (facing feet of zombies)</li></ul></li></ul></li><li><code class="shiki"><span>positioned ^^^1</span></code><ul><li>from previous point, pushes the execution position 1 block forward in the direction of the entity/coordinate.</li></ul></li><li><code class="shiki"><span>positioned ~~-1.62~</span></code><ul><li>lowers the execution position back to that of the player&#39;s feet on the y axis. Which is 1.62 blocks below eye level.</li><li>Note: Due to the <a href="https://bugs.mojang.com/browse/MCPE-165051" target="_blank" rel="noreferrer">MCPE-165051</a> bug, you cannot use <code class="shiki"><span>anchored feet</span></code> in place of this.</li></ul></li><li><code class="shiki"><span>rotated as @s</span></code><ul><li>Reverts the execution rotation to that of the target.</li></ul></li><li><code class="shiki"><span>positioned ^^^-1</span></code><ul><li>from previous point, pushes the execution position 1 block backwards from the direction the target is facing.</li></ul></li><li><code class="shiki"><span>if entity @s[r=0.2]</span></code><ul><li>checks if the target is within a 0.2 block radius from the execution position. ie., check if after this back and forth we&#39;ve arrived roughly back at the target&#39;s feet position.</li><li>To increase or decrease the tolerance for what is considered &quot;close enough&quot;, change the <code class="shiki"><span>0.2</span></code> distance argument. <ul><li>it needs to be between <code class="shiki"><span>0.2</span></code> and <code class="shiki"><span>2</span></code>, as <code class="shiki"><span>2</span></code> basically means you can look in the opposite direction and it&#39;s still &quot;close enough&quot;. So, realistically, you want to most likely stay well below <code class="shiki"><span>1</span></code>.</li></ul></li><li>To calculate the exact viewing cone angle, see below.</li></ul></li></ul><p><strong>Examples:</strong></p><ol><li>Run a <code class="shiki"><span>/say</span></code> command when looking at the eyes of cows or sheeps tagged &#39;target&#39;:</li></ol>',9)),t(i,null,{default:a(()=>e[1]||(e[1]=[o("BP/functions/wiki/detect_state/player/is_looking_at/target.mcfunction")])),_:1}),e[7]||(e[7]=s(`<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF;">execute as @a at @s anchored eyes facing entity @e[type=cow,tag=wiki:target] eyes positioned ~~-1.62~ positioned ^^^1 rotated as @s positioned ^^^-1 if entity @s[r=0.2] run say hello cow!</span></span>
<span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF;">execute as @a at @s anchored eyes facing entity @e[type=sheep,tag=wiki:target] eyes positioned ~~-1.62~ positioned ^^^1 rotated as @s positioned ^^^-1 if entity @s[r=0.2] run say hello sheep!</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="`+n+'" alt="A Repeating Command Block"></p><ol start="2"><li>Run a <code class="shiki"><span>/say</span></code> command when looking at the position <code class="shiki"><span>(10, 20, 30)</span></code> or <code class="shiki"><span>(6, 7, 8)</span></code>:</li></ol>',3)),t(i,null,{default:a(()=>e[2]||(e[2]=[o("BP/functions/wiki/detect_state/player/is_looking_at/position.mcfunction")])),_:1}),e[8]||(e[8]=s(`<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF;">execute as @a at @s anchored eyes facing 10 20 30 positioned ~~-1.62~ positioned ^^^1 rotated as @s positioned ^^^-1 if entity @s[r=0.2] run say hello block!</span></span>
<span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF;">execute as @a at @s anchored eyes facing 6 7 8 positioned ~~-1.62~ positioned ^^^1 rotated as @s positioned ^^^-1 if entity @s[r=0.2] run say hello block!</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="`+n+'" alt="A Repeating Command Block"></p><p><strong>Alternative Structure:</strong></p>',3)),t(i,null,{default:a(()=>e[3]||(e[3]=[o("BP/functions/wiki/detect_state/player/is_looking_at.mcfunction")])),_:1}),e[9]||(e[9]=s('<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF;">execute as &lt;target&gt; at &lt;coordinate | entity&gt; facing entity @s eyes positioned as @s positioned ^^^1 rotated as @s positioned ^^^1 if entity @s[r=0.02] run &lt;command&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+n+'" alt="A Repeating Command Block"></p><p>If you don&#39;t need to detect the target looking at the <em>eyes</em> of an entity but their feet or a coordinate, you may use this structure which negates the need for the <code class="shiki"><span>anchored eyes</span></code> instruction as the execution position begins from the entity/coordinate rather than the target.</p><h2 id="calculate-viewing-angle" tabindex="-1">Calculate Viewing Angle <a class="header-anchor" href="#calculate-viewing-angle" aria-label="Permalink to &quot;Calculate Viewing Angle&quot;">​</a></h2><p>To approximate the distance/radius you want to use based on your viewing angle, you can use the following formula, where <code class="shiki"><span>α</span></code> is the angle that you want this method to trigger inside of, left and right of the target:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span>r = 2 * sin ( α / 2 )</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>or, the inverse to calculate what viewing angle a certain radius / distance (<code class="shiki"><span>r</span></code>) value will give you:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span>α = sin^(-1) (r / 2) * 2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>Note: Depending on your calculator, you&#39;ll need to convert from radians to degrees.</p></blockquote><p>With the above calculation, the example value of <code class="shiki"><span>r=0.2</span></code> leaves us with roughly a 12° angle by which we can miss the exact target in either direction and still have it considered &quot;close enough.&quot;</p><h2 id="look-detection-v2" tabindex="-1">Look Detection V2 <a class="header-anchor" href="#look-detection-v2" aria-label="Permalink to &quot;Look Detection V2&quot;">​</a></h2><p><strong>Credits:</strong> <em>@GobbleCrow</em></p><p><img src="'+u+'" alt="Demonstration GIF: Player Looking at an Armor Stand"></p><p>If you need higher precision for detecting where a player is looking—ideal for fine-tuned mechanics—you can use the following command which uses a very similar logic:</p>',14)),t(i,null,{default:a(()=>e[4]||(e[4]=[o("BP/functions/wiki/detect_state/player/is_precisely_looking_at.mcfunction")])),_:1}),e[10]||(e[10]=s('<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF;">execute as @a at @s anchored eyes positioned ~~-0.5~ facing entity @e[type=armor_stand,rm=0.0001] feet positioned ^^^10 rotated as @s positioned ^^^10 facing entity @s eyes positioned as @s positioned ^^^-1 rotated as @s positioned ^^^-1 if entity @s[r=0.766] positioned as @s anchored eyes positioned as @e[type=armor_stand,rm=0.0001] anchored feet positioned ~~0.5~ positioned ^^^100000 facing entity @s eyes positioned as @s positioned ^^^10 rotated as @s positioned ^^^10 run title @s[r=0.00005] actionbar §aFound Armor Stand!</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>This will execute a command (e.g., <code class="shiki"><span>/title</span></code>) when the specified target(s) (e.g., <code class="shiki"><span>@a</span></code>) is precisely looking at either the <strong>eyes</strong> or <strong>feet</strong> of an entity (such as <code class="shiki"><span>@e[type=armor_stand]</span></code>) and is within a <code class="shiki"><span>0.00005</span></code> detection radius, assuming all conditions are met.</p><blockquote><p><strong>Note:</strong> The <code class="shiki"><span>0.766</span></code> radius was chosen to match the armor stand’s hitbox. For other entities, you may need to adjust this value to suit their specific hitbox size and your desired precision.</p></blockquote><h3 id="customizing-for-block-coordinates" tabindex="-1">Customizing for Block Coordinates <a class="header-anchor" href="#customizing-for-block-coordinates" aria-label="Permalink to &quot;Customizing for Block Coordinates&quot;">​</a></h3><p>To detect whether a player is looking at a specific block position instead of an entity, replace the following parts of the command:</p><ol><li><p>Replace <code class="shiki"><span>facing entity @e[type=armor_stand,rm=0.0001] feet</span></code></p><ul><li>with <code class="shiki"><span>facing &lt;coordinate&gt;</span></code></li><li><em>(e.g., <code class="shiki"><span>facing 10 0 10</span></code>)</em></li></ul></li><li><p>Replace <code class="shiki"><span>positioned as @e[type=armor_stand,rm=0.0001]</span></code></p><ul><li>with <code class="shiki"><span>positioned &lt;coordinate&gt;</span></code></li><li><em>(e.g., <code class="shiki"><span>positioned 10 0 10</span></code>)</em></li></ul></li></ol>',6))])}const C=l(h,[["render",m]]);export{w as __pageData,C as default};
