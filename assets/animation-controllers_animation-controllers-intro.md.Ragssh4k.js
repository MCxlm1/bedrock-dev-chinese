import{_ as e,E as t,j as h,k as r,a5 as n,A as i,I as l,J as p}from"./chunks/framework.3Z9w-w8R.js";const k="/assets/images/concepts/animation-controllers/two_state_FSM.png",o="/assets/images/concepts/animation-controllers/three_state_FSM.png",q=JSON.parse('{"title":"动画控制器介绍","description":"动画控制器介绍。","frontmatter":{"title":"动画控制器介绍","nav_order":1,"tags":["guide"],"mentions":["SirLich","solvedDev","Joelant05","MedicalJewel105","stirante","cda94581","ThijsHankelMC","MetalManeMc","ThomasOrs"],"description":"动画控制器介绍。"},"headers":[{"level":2,"title":"什么是状态机？","slug":"什么是状态机","link":"#什么是状态机","children":[]},{"level":2,"title":"状态机示例","slug":"状态机示例","link":"#状态机示例","children":[]},{"level":2,"title":"什么是动画控制器？","slug":"什么是动画控制器","link":"#什么是动画控制器","children":[{"level":3,"title":"将控制器附加到实体","slug":"将控制器附加到实体","link":"#将控制器附加到实体","children":[]},{"level":3,"title":"RP动画控制器","slug":"rp动画控制器","link":"#rp动画控制器","children":[]},{"level":3,"title":"BP动画控制器","slug":"bp动画控制器","link":"#bp动画控制器","children":[]}]},{"level":2,"title":"动画控制器示例","slug":"动画控制器示例","link":"#动画控制器示例","children":[{"level":3,"title":"简单示例","slug":"简单示例","link":"#简单示例","children":[]},{"level":3,"title":"完整示例","slug":"完整示例","link":"#完整示例","children":[]}]},{"level":2,"title":"RP动画控制器","slug":"rp动画控制器-1","link":"#rp动画控制器-1","children":[]},{"level":2,"title":"BP动画控制器","slug":"bp动画控制器-1","link":"#bp动画控制器-1","children":[]},{"level":2,"title":"动画控制器流程","slug":"动画控制器流程","link":"#动画控制器流程","children":[{"level":3,"title":"加载","slug":"加载","link":"#加载","children":[]},{"level":3,"title":"重置","slug":"重置","link":"#重置","children":[]}]},{"level":2,"title":"注释","slug":"注释","link":"#注释","children":[]}],"relativePath":"animation-controllers/animation-controllers-intro.md","filePath":"animation-controllers/animation-controllers-intro.md"}'),d={name:"animation-controllers/animation-controllers-intro.md"};function D(u,s,c,b,g,y){const a=t("CodeHeader");return r(),h("div",null,[s[9]||(s[9]=n('<p>动画控制器（AC）是可以在资源包和行为包中使用的状态机。在资源包中，动画控制器（RPAC）用于播放动画，而在行为包（BPAC）中，它们用于播放命令和命令&quot;动画&quot;。</p><h2 id="什么是状态机" tabindex="-1">什么是状态机？ <a class="header-anchor" href="#什么是状态机" aria-label="Permalink to &quot;什么是状态机？&quot;">​</a></h2><p>状态机是一种特殊的逻辑管理方式，依赖于一系列状态。每个状态都有两个属性：</p><ul><li>在当前状态下要做什么</li><li>如何转移到其他状态</li></ul><p>状态机在各处广泛使用，特别是在经典编程中。它们不仅存在于minecraft中！您可以在<a href="https://www.itemis.com/en/yakindu/state-machine/documentation/user-guide/overview_what_are_state_machines" target="_blank" rel="noreferrer">此处</a>了解有关状态机的更多信息。</p><p>状态机一次只能处于一个状态。当状态机&quot;运行&quot;时，您可以将其视为从一个状态移动到另一个状态，执行内部逻辑，然后沿着<code class="shiki"><span>transitions</span></code>（转换）到其他状态。</p><h2 id="状态机示例" tabindex="-1">状态机示例 <a class="header-anchor" href="#状态机示例" aria-label="Permalink to &quot;状态机示例&quot;">​</a></h2><p>状态机之所以有用，是因为它们允许我们自然地将动画分解为逻辑流程，其中每个状态处理自己的动画_和_自己的逻辑。</p><p>例如，想象一下您想要为直升机的旋转叶片制作动画 - 但仅当直升机在地面时。您有两种状态：</p><ul><li><code class="shiki"><span>地面状态</span></code></li><li><code class="shiki"><span>飞行状态</span></code></li></ul><p>我们可以用上述两段信息来注释这些状态：</p><ul><li><code class="shiki"><span>地面状态</span></code>: <ul><li>不播放动画</li><li>如果在空中则转移到<code class="shiki"><span>飞行状态</span></code></li></ul></li><li><code class="shiki"><span>飞行状态</span></code>: <ul><li>播放飞行动画</li><li>如果在地面则转移到<code class="shiki"><span>地面状态</span></code></li></ul></li></ul><p>这里是状态机的流程图表示：</p><p><img src="'+k+'" alt=""></p><p>在此流程图中，状态由矩形表示，箭头表示从一个状态到另一个状态的_转换_。</p><p>流程图是可视化多状态有限状态机的好方法，因为它允许您跟踪动画的逻辑_流程_。让我们看一个更详细的示例，添加第三个<code class="shiki"><span>爆炸</span></code>状态：</p><p><img src="'+o+'" alt=""></p><p>如您所见，状态可以同时转到多个状态。状态也可能是死胡同（因为直升机已损坏，不再需要进一步动画）。动画控制器的分支流程是它们强大之处的重要组成部分。</p><h2 id="什么是动画控制器" tabindex="-1">什么是动画控制器？ <a class="header-anchor" href="#什么是动画控制器" aria-label="Permalink to &quot;什么是动画控制器？&quot;">​</a></h2><p>动画控制器是Minecraft状态机，允许我们播放动画和运行命令。动画控制器始终位于<code class="shiki"><span>animation_controllers</span></code>文件夹下，位于RP或BP中。</p><h3 id="将控制器附加到实体" tabindex="-1">将控制器附加到实体 <a class="header-anchor" href="#将控制器附加到实体" aria-label="Permalink to &quot;将控制器附加到实体&quot;">​</a></h3><p>动画控制器在自己的文件中定义，必须在执行任何操作之前&quot;附加&quot;到实体。要将AC附加到您的实体，您必须做两件事：</p><ul><li>为动画控制器定义一个简称</li><li>通过<code class="shiki"><span>scripts</span></code>运行动画控制器</li></ul><p>这是一个示例<code class="shiki"><span>description</span></code>，展示了如何首先在<code class="shiki"><span>animations</span></code>中定义AC，然后在<code class="shiki"><span>scripts/animate</span></code>中播放。</p>',24)),i(a,null,{default:l(()=>s[0]||(s[0]=[p("RP/entity/helicopter.ce.json 或 BP/entities/helicopter.se.json")])),_:1}),s[10]||(s[10]=n(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">&quot;description&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">	&quot;identifier&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;wiki:helicopter&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">	&quot;animations&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">		&quot;blade_controller&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;controller.animation.helicopter.blade&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">	},</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">	&quot;scripts&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">		&quot;animate&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">			&quot;blade_controller&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">		]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">	}</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>如果您想有条件地播放动画控制器，可以提供一个可选的molang参数。如果参数计算结果为真，则控制器将播放：</p>`,2)),i(a,null,{default:l(()=>s[1]||(s[1]=[p("RP/entity/helicopter.ce.json 或 BP/entities/helicopter.se.json")])),_:1}),s[11]||(s[11]=n(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">&quot;scripts&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">	&quot;animate&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">		{</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">			// 仅当直升机有骑手时才播放blade_controller。</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">			&quot;blade_controller&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;q.has_rider&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">		}</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">	]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="rp动画控制器" tabindex="-1">RP动画控制器 <a class="header-anchor" href="#rp动画控制器" aria-label="Permalink to &quot;RP动画控制器&quot;">​</a></h3><p>RP动画控制器位于RP中，可以附加到RP实体。它们允许您播放骨骼动画。</p><h3 id="bp动画控制器" tabindex="-1">BP动画控制器 <a class="header-anchor" href="#bp动画控制器" aria-label="Permalink to &quot;BP动画控制器&quot;">​</a></h3><p>BP动画控制器位于BP中，可以附加到BP实体。它们允许您播放命令并向实体发送事件。</p><h2 id="动画控制器示例" tabindex="-1">动画控制器示例 <a class="header-anchor" href="#动画控制器示例" aria-label="Permalink to &quot;动画控制器示例&quot;">​</a></h2><p>让我们看一下上面状态机示例中的简单动画控制器：</p><h3 id="简单示例" tabindex="-1">简单示例 <a class="header-anchor" href="#简单示例" aria-label="Permalink to &quot;简单示例&quot;">​</a></h3>`,8)),i(a,null,{default:l(()=>s[2]||(s[2]=[p("RP/animation_controllers/helicopter.ac.json")])),_:1}),s[12]||(s[12]=n(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">{</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;format_version&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;1.10.0&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;animation_controllers&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">        &quot;controller.animation.helicopter.blade&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;initial_state&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;ground&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;states&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;ground&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;transitions&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                            &quot;flying&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;!q.is_on_ground&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                },</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;flying&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;animations&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;flying&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">],</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;transitions&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                            &quot;ground&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;q.is_on_ground&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">            }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>这里有很多内容。让我们一步一步地分解。当我们这样做时，请记住两件事：</p><ul><li>动画控制器是_状态列表_</li><li>每个状态包含两条信息：<em>在任何给定状态下要做什么</em>，以及_如何转换到新状态_。</li></ul><p>因此，这个特定示例包含两种状态：</p><ul><li><code class="shiki"><span>ground</span></code>（地面）</li><li><code class="shiki"><span>flying</span></code>（飞行）</li></ul><p>您可以注意到<code class="shiki"><span>&quot;initial_state&quot;: &quot;ground&quot;</span></code>意味着我们的动画控制器将从<code class="shiki"><span>ground</span></code>状态开始。</p>`,6)),i(a,null,{default:l(()=>s[3]||(s[3]=[p(" RP/animation_controllers/helicopter.ac.json#animation_controllers/controller.animation.helicopter.blade/states ")])),_:1}),s[13]||(s[13]=n(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">&quot;ground&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;transitions&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;flying&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;!q.is_on_ground&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code class="shiki"><span>ground</span></code>状态包含一个_转换_列表，这是我们到达其他状态的方式。在此示例中，默认状态表示：<em>当<code class="shiki"><span>q.is_on_ground</span></code>不为真时移动到<code class="shiki"><span>flying</span></code>状态</em>。换句话说 - 当我们飞到空中时开始飞行动画！</p>`,2)),i(a,null,{default:l(()=>s[4]||(s[4]=[p(" RP/animation_controllers/helicopter.ac.json#animation_controllers/controller.animation.helicopter.blade/states ")])),_:1}),s[14]||(s[14]=n(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">&quot;flying&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;animations&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">        &quot;flying&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    ],</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;transitions&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;ground&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;q.is_on_ground&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code class="shiki"><span>flying</span></code>状态也包含一个转换列表。在这种情况下，它包含相反的转换：<em>当<code class="shiki"><span>q.is_on_ground</span></code>为真时移动到<code class="shiki"><span>ground</span></code>状态</em>。换句话说 - 当我们降落在地面上时回到默认状态！</p><p>除了<code class="shiki"><span>transition</span></code>（转换）列表之外，还有一个在此状态下播放的<code class="shiki"><span>animations</span></code>（动画）列表。在这种情况下，播放<code class="shiki"><span>flying</span></code>动画。此动画需要在此实体的实体定义文件中定义。</p><h3 id="完整示例" tabindex="-1">完整示例 <a class="header-anchor" href="#完整示例" aria-label="Permalink to &quot;完整示例&quot;">​</a></h3><p>下面是上面第二个状态机的代码，这次有三个状态。此示例说明了一些新概念：</p><ul><li>具有多个转换的状态</li><li>没有转换的状态</li></ul>`,6)),i(a,null,{default:l(()=>s[5]||(s[5]=[p("RP/animation_controllers/helicopter.ac.json")])),_:1}),s[15]||(s[15]=n(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">{</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;format_version&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;1.10.0&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;animation_controllers&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">        &quot;controller.animation.helicopter.blade&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;initial_state&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;ground&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;states&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;ground&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;transitions&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                            &quot;flying&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;!q.is_on_ground&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        },</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                            &quot;explode&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;!q.is_alive&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                },</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;flying&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;animations&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;flying&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">],</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;transitions&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                            &quot;ground&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;q.is_on_ground&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        },</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                            &quot;explode&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;!q.is_alive&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                },</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;explode&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;animations&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;explode&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">            }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="rp动画控制器-1" tabindex="-1">RP动画控制器 <a class="header-anchor" href="#rp动画控制器-1" aria-label="Permalink to &quot;RP动画控制器&quot;">​</a></h2><p>资源包动画控制器也可以运行声音和粒子等内容。 在动画控制器中调用声音或粒子之前，您需要在客户端实体文件中定义它们。</p>`,3)),i(a,null,{default:l(()=>s[6]||(s[6]=[p("RP/entities/custom_tnt.json#minecraft:client_entity/description")])),_:1}),s[16]||(s[16]=n(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">&quot;sound_effects&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;explosion&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;wiki.custom_tnt.explosion&quot;</span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;"> //其中wiki.custom_tnt.explosion是在sound_definitions中定义的声音，就像动画声音一样。</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">},</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">&quot;particle_effects&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;fuse_lit&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;wiki:tnt_fuse_lit_particle&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>然后您才能在动画控制器中调用它们：</p>`,2)),i(a,null,{default:l(()=>s[7]||(s[7]=[p(" RP/animation_controllers/custom_tnt.animation_controllers.json#controller.animation.custom_tnt ")])),_:1}),s[17]||(s[17]=n(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">&quot;states&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">:{</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;default&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">:{</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">        &quot;transitions&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">:[</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">            {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;explode_state&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;q.mark_variant == 1&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">            }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    },</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;explode_state&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">:{</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">        &quot;sound_effects&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">:[</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">            {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;effect&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;explosion&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">            }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        ],</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">		&quot;particle_effects&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">			{</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">				&quot;effect&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;fuse_lit&quot;</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">				// &quot;locator&quot;: &quot;&lt;bone&gt;&quot; 定位器也可以放在这里</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">			}</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">		],</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">        &quot;transitions&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">:[</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">            {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;default&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;q.mark_variant == 0&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">            }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">警告！并非每个粒子都能在那里工作。如果您有问题，请考虑尝试另一个粒子。例如，使用烈焰人动画控制器中的一个。</p></div><h2 id="bp动画控制器-1" tabindex="-1">BP动画控制器 <a class="header-anchor" href="#bp动画控制器-1" aria-label="Permalink to &quot;BP动画控制器&quot;">​</a></h2><p>行为包动画控制器使用与RP动画控制器相同的通用格式，不同之处在于不是触发动画，它们允许您触发命令、事件或执行Molang代码。一般来说，它们引入了两个新字段：</p><ul><li><code class="shiki"><span>on_entry</span></code>：进入状态时播放的命令</li><li><code class="shiki"><span>on_exit</span></code>：退出状态时播放的命令</li></ul><p>在这种情况下，命令指三件不同的事情：</p><ul><li>斜杠命令，如<code class="shiki"><span>/say 你好！</span></code></li><li>实体上的事件触发器，例如：<code class="shiki"><span>@s wiki:transform_into_plane</span></code></li><li>任意Molang表达式，如<code class="shiki"><span>v.tickets += 1;</span></code>（这也适用于资源包动画控制器）</li></ul><p>这是一个BP动画控制器示例，展示了一些这种行为：</p>`,8)),i(a,null,{default:l(()=>s[8]||(s[8]=[p("BP/animation_controllers/helicopter.ac.json")])),_:1}),s[18]||(s[18]=n(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">{</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;format_version&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;1.10.0&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;animation_controllers&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">        &quot;controller.animation.helicopter.commands&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;initial_state&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;ground&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;states&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;ground&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;on_entry&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;/say 我现在在地面上了！&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">],</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;transitions&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                            &quot;flying&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;!q.is_on_ground&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                },</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;flying&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;on_entry&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;/say 我现在在空中了！&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">],</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;transitions&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                            &quot;ground&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;q.is_on_ground&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">            }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="动画控制器流程" tabindex="-1">动画控制器流程 <a class="header-anchor" href="#动画控制器流程" aria-label="Permalink to &quot;动画控制器流程&quot;">​</a></h2><p>通过示例，希望您开始了解动画控制器流程是如何工作的。在本节中，我将更明确地解释它。</p><h3 id="加载" tabindex="-1">加载 <a class="header-anchor" href="#加载" aria-label="Permalink to &quot;加载&quot;">​</a></h3><p>当实体加载到世界中时，它将进入每个附加动画控制器中的默认动画控制器状态。如果未定义<code class="shiki"><span>initial_state</span></code>，则使用名为<code class="shiki"><span>default</span></code>的状态。如果缺少此状态，AC将生成内容日志。</p><p>运行时，AC将在每个tick中执行以下操作：</p><ol><li>运行当前状态中的任何动画（如果设置为循环将循环播放，否则只会播放一次）。如果刚刚进入状态，则运行<code class="shiki"><span>on_entry</span></code>中的任何命令。</li><li>检查所有转换以查看是否有任何有效转换。从列表的顶部到底部搜索，并移动到第一个有效转换。如果找到转换，将播放<code class="shiki"><span>on_exit</span></code>命令。</li></ol><p>由于动画控制器的设置方式，它最多每tick仅从一个状态移动到另一个状态。</p><h3 id="重置" tabindex="-1">重置 <a class="header-anchor" href="#重置" aria-label="Permalink to &quot;重置&quot;">​</a></h3><p>当实体重新加载时（玩家加入/离开、区块重新加载等），动画控制器将&quot;重置&quot;。这意味着它将&quot;跳回&quot;到默认状态。您应该始终在默认状态中包含能够重启任何关键动画的逻辑。</p><h2 id="注释" tabindex="-1">注释 <a class="header-anchor" href="#注释" aria-label="Permalink to &quot;注释&quot;">​</a></h2><p>您也可以在动画控制器中创建变量（并重新映射它们的值）！</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">{</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;format_version&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;1.17.30&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;animation_controllers&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">        &quot;controller.animation.sheep.move&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;states&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;default&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;variables&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                        &quot;ground_speed_curve&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                            &quot;input&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;q.ground_speed&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                            &quot;remap_curve&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                                &quot;0.0&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">0.2</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                                &quot;1.0&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">0.7</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                            }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    },</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;animations&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">                        &quot;wiggle_nose&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                            &quot;walk&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;v.ground_speed_curve&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">            }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div>`,13))])}const C=e(d,[["render",D]]);export{q as __pageData,C as default};
