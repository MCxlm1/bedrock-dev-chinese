import{_ as c}from"./chunks/6.Dn5VJ9Pw.js";import{_ as d,E as n,j as u,k as h,a5 as e,A as a,l as i,I as l,J as o}from"./chunks/framework.3Z9w-w8R.js";const C=JSON.parse('{"title":"On Player Leave","description":"This system will run your desired commands on the event that a player leaves the world.","frontmatter":{"title":"On Player Leave","category":"On Event Systems","mentions":["BedrockCommands","zheaEvyline"],"nav_order":3,"description":"This system will run your desired commands on the event that a player leaves the world."},"headers":[{"level":2,"title":"Introduction","slug":"introduction","link":"#introduction","children":[]},{"level":2,"title":"Setup","slug":"setup","link":"#setup","children":[]},{"level":2,"title":"System","slug":"system","link":"#system","children":[]},{"level":2,"title":"Explanation","slug":"explanation","link":"#explanation","children":[]},{"level":2,"title":"Tick JSON","slug":"tick-json","link":"#tick-json","children":[]}],"relativePath":"commands/on-player-leave.md","filePath":"commands/on-player-leave.md"}'),m={name:"commands/on-player-leave.md"},k={class:"tip custom-block"};function y(b,s,f,v,_,g){const t=n("CodeHeader"),r=n("WikiImage"),p=n("FolderView");return h(),u("div",null,[s[4]||(s[4]=e('<h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p><a href="https://bedrockcommands.org/" target="_blank" rel="noreferrer">Sourced by the Bedrock Commands Community Discord</a></p><p>This system will run your desired commands on the event that a player leaves the world.</p><blockquote><p><strong>Note:</strong> You cannot execute commands on <em>players</em> that leave using target selectors. However, you can use the <a href="/commands/on-player-join">On Player Join</a> system to execute commands when they rejoin.</p></blockquote><h2 id="setup" tabindex="-1">Setup <a class="header-anchor" href="#setup" aria-label="Permalink to &quot;Setup&quot;">​</a></h2><p><em>To be typed in chat:</em></p><p><code class="shiki"><span>/scoreboard objectives add wiki:player_count dummy</span></code></p><p>If you are working with functions and prefer to have the objective added automatically when the world initializes, follow the process outlined in <a href="/commands/on-first-world-load">On First World Load</a>.</p><h2 id="system" tabindex="-1">System <a class="header-anchor" href="#system" aria-label="Permalink to &quot;System&quot;">​</a></h2>',9)),a(t,null,{default:l(()=>s[0]||(s[0]=[o("BP/functions/wiki/event/players/on_leave.mcfunction")])),_:1}),s[5]||(s[5]=e(`<div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">## Get Current Tick Player Count</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">### Reset score</span></span>
<span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF;">scoreboard players reset .CurrentTick wiki:player_count</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">### Tally score</span></span>
<span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF;">execute as @a run scoreboard players add .CurrentTick wiki:player_count 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">## Get Difference (Current - Previous)</span></span>
<span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF;">scoreboard players operation .CurrentTick wiki:player_count -= .PreviousTick wiki:player_count</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">## Your Commands Here (Example)</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">### Message if there is a difference of -1 or less</span></span>
<span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF;">execute if score .CurrentTick wiki:player_count matches ..-1 run say One or more players have left the world</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">## Save Current Tick Player Count to Compare Next Game Tick</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">### Reset score</span></span>
<span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF;">scoreboard players reset .PreviousTick wiki:player_count</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">### Tally score</span></span>
<span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF;">execute as @a run scoreboard players add .PreviousTick wiki:player_count 1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><img src="`+c+'" alt="Chain of 6 Command Blocks"></p><p>Here, we have used a <code class="shiki"><span>/say</span></code> command as an example, but you can use any command you prefer and as many as you need.</p><p>Just make sure to follow the given order and properly apply the <code class="shiki"><span>/execute if score</span></code> condition as shown for your desired commands.</p><h2 id="explanation" tabindex="-1">Explanation <a class="header-anchor" href="#explanation" aria-label="Permalink to &quot;Explanation&quot;">​</a></h2><p>Since <code class="shiki"><span>.PreviousTick</span></code> score is updated at the end of the command loop, it can be used at the start of the next game tick to compare with the score of <code class="shiki"><span>.CurrentTick</span></code>.</p><p>The player count is obtained using the <a href="/commands/entity-counter">Entity Counter</a> system. Reading that page is recommended to better understand this system.</p><p>By subtracting <code class="shiki"><span>.PreviousTick</span></code> score from <code class="shiki"><span>.CurrentTick</span></code> score, we can determine if the player count has:</p><ul><li>Decreased (<code class="shiki"><span>..-1</span></code>)</li><li>Increased (<code class="shiki"><span>1..</span></code>)</li><li>Remains unchanged (<code class="shiki"><span>0</span></code>)</li></ul><p>If it has decreased, it means one or more players have left the game. Using this, we can execute commands when <code class="shiki"><span>.CurrentTick</span></code> is <code class="shiki"><span>-1</span></code> or lower.</p><ul><li><p>For example, if there were 10 players and one leaves:</p><ul><li><code class="shiki"><span>.CurrentTick - .PreviousTick = 9 - 10 = -1</span></code></li><li>We detect this using <code class="shiki"><span>..-1</span></code></li></ul></li><li><p><code class="shiki"><span>.CurrentTick</span></code> is obtained first, subtraction is performed next, commands are executed based on the result, and finally, <code class="shiki"><span>.PreviousTick</span></code> is updated to be used in the next game tick.</p></li></ul>',11)),i("div",k,[s[1]||(s[1]=i("p",{class:"custom-block-title"},"TIP",-1)),s[2]||(s[2]=i("p",null,"All commands in a command-block chain or function will execute sequentially but within the same game tick, regardless of the number of commands involved. This system works because commands execute at the end of a game tick after all events (such as player join, leave, death, etc.) occur.",-1)),a(r,{src:"/assets/images/commands/intro-to-command-blocks/game-tick.png",alt:"Game Tick",height:"200"})]),s[6]||(s[6]=e('<h2 id="tick-json" tabindex="-1">Tick JSON <a class="header-anchor" href="#tick-json" aria-label="Permalink to &quot;Tick JSON&quot;">​</a></h2><p>If you are using functions instead of command blocks, the <code class="shiki"><span>on_leave</span></code> function must be added to <code class="shiki"><span>tick.json</span></code> to ensure continuous execution. Multiple files can be added to <code class="shiki"><span>tick.json</span></code> by placing a comma after each string. Refer to the <a href="/commands/mcfunctions#tick-json">Functions</a> documentation for more details.</p>',2)),a(t,null,{default:l(()=>s[3]||(s[3]=[o("BP/functions/tick.json")])),_:1}),s[7]||(s[7]=e(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">{</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">  &quot;values&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">    &quot;wiki/event/players/on_leave&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">  ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>If using functions, your pack folder structure should be as follows:</p>`,2)),a(p,{paths:["BP","BP/functions","BP/functions/wiki","BP/pack_icon.png","BP/manifest.json","BP/functions/wiki/event","BP/functions/wiki/event/players","BP/functions/wiki/event/players/on_leave.mcfunction","BP/functions/tick.json"]})])}const P=d(m,[["render",y]]);export{C as __pageData,P as default};
