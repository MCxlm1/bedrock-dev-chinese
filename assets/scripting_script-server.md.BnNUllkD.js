import{_ as n,E as e,j as t,k as l,a5 as i,A as p,I as h,J as k}from"./chunks/framework.3Z9w-w8R.js";const r="/assets/images/gametest/script-server/dynamic_properties.png",C=JSON.parse('{"title":"Script Core Features","description":"Introduction to some of the core API mechanics.","frontmatter":{"title":"Script Core Features","description":"Introduction to some of the core API mechanics.","category":"Tutorials","mentions":["JaylyDev","SmokeyStack","ThomasOrs","kumja1","QuazChick"]},"headers":[{"level":2,"title":"Setup","slug":"setup","link":"#setup","children":[]},{"level":2,"title":"Events","slug":"events","link":"#events","children":[]},{"level":2,"title":"Scheduling","slug":"scheduling","link":"#scheduling","children":[]},{"level":2,"title":"Saving and Loading data","slug":"saving-and-loading-data","link":"#saving-and-loading-data","children":[]},{"level":2,"title":"Running Commands","slug":"running-commands","link":"#running-commands","children":[]}],"relativePath":"scripting/script-server.md","filePath":"scripting/script-server.md"}'),d={name:"scripting/script-server.md"};function o(D,s,c,g,y,u){const a=e("CodeHeader");return l(),t("div",null,[s[1]||(s[1]=i('<div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>The Script API is currently in active development, and breaking changes are frequent. This page assumes the format of Minecraft 1.21.20</p></div><p>In Scripting API, most of the core features are implemented in the <code class="shiki"><span>@minecraft/server</span></code> module, which contains lots of methods to interact with Minecraft world, including entities, blocks, dimensions, and more. This article contains a basic introduction to some of the core API mechanics. For more detailed information please visit the <a href="https://learn.microsoft.com/en-us/minecraft/creator/scriptapi/minecraft/server/minecraft-server" target="_blank" rel="noreferrer">Microsoft documentation</a> pages.</p><h2 id="setup" tabindex="-1">Setup <a class="header-anchor" href="#setup" aria-label="Permalink to &quot;Setup&quot;">​</a></h2><p>You will need to add the script module as a dependency in your <code class="shiki"><span>manifest.json</span></code>.</p>',4)),p(a,null,{default:h(()=>s[0]||(s[0]=[k("BP/manifest.json")])),_:1}),s[2]||(s[2]=i(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">{</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;dependencies&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;module_name&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;version&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;1.13.0&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" aria-label="Permalink to &quot;Events&quot;">​</a></h2><p>In script API, the <code class="shiki"><span>@minecraft/server</span></code> module uses its own event-driven architecture, making it possible to execute code when a specific event occurs by subscribing to an event listener.</p><p><strong>World Events</strong></p><p>World event APIs provides many event listeners that fires when a specific type of events happen in a Minecraft world, such as <code class="shiki"><span>chatSend</span></code>, <code class="shiki"><span>entityHurt</span></code>, <code class="shiki"><span>playerSpawn</span></code>, <code class="shiki"><span>worldInitialize</span></code> and many more.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Check the Microsoft docs to see what world events are available within Minecraft.</p><ul><li>Before events fire before an event happens and are read-only but can be canceled. <a href="https://learn.microsoft.com/en-us/minecraft/creator/scriptapi/minecraft/server/worldbeforeevents" target="_blank" rel="noreferrer">Before Event Documentation</a>.</li><li>After events fire after an event has run and cannot be canceled. <a href="https://learn.microsoft.com/en-us/minecraft/creator/scriptapi/minecraft/server/worldafterevents" target="_blank" rel="noreferrer">After Event Documentation</a></li><li>After events should always be used unless the event needs to be canceled.</li></ul></div><p>In order to subscribe to an event, get the <code class="shiki"><span>afterEvents</span></code> property from the world object. In this example we will subscribe to the block break event.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">import</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> } </span><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> &quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// subscribing to the block break event</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// fires when a player breaks a block</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">afterEvents</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">playerBreakBlock</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">subscribe</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">((</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">event</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">    const</span><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;"> player</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">event</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">player</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">; </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// Player that broke the block for this event.</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">    const</span><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;"> block</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">event</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">block</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">; </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// Block impacted by this event. Note that the typeId if this block will ALWAYS be air.</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">    const</span><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;"> permutation</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">event</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">brokenBlockPermutation</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">; </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// Returns permutation information about this block before it was broken.</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    player</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">sendMessage</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span></span>
<span class="line"><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">        \`You have broken </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">\${</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">permutation</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000FF;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">type</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000FF;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">id</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">}</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> at </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">\${</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">block</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000FF;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">x</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">}</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">, </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">\${</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">block</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000FF;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">y</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">}</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">, </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">\${</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">block</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000FF;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">z</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">}</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">\`</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    ); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// Sends a message to player.</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>System events</strong></p><p>System events fires when a specific type of event happens in the scope of the Minecraft add-on system.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Check the Microsoft docs to see what system events are available within Minecraft.</p><ul><li>Before events fire before an event happens and are read-only but can be canceled. <a href="https://learn.microsoft.com/en-us/minecraft/creator/scriptapi/minecraft/server/systembeforeevents" target="_blank" rel="noreferrer">Before Event Documentation</a>.</li><li>After events fire after an event has run and cannot be canceled. <a href="https://learn.microsoft.com/en-us/minecraft/creator/scriptapi/minecraft/server/systemafterevents" target="_blank" rel="noreferrer">After Event Documentation</a></li><li>Both types of events are used for different purposes.</li></ul></div><p>Get the <code class="shiki"><span>beforeEvents</span></code> property from the system object. In this example we will subscribe to the watchdogTerminate event, allowing the API to cancel the performance watchdog from closing the world if the game exceedes a performance boundary, depending on the configuration of the script environment.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">import</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> } </span><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> &quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// subscribing to the watchdogTerminate event</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">beforeEvents</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">watchdogTerminate</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">subscribe</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">((</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">event</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    event</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">cancel</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">true</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">; </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// Cancel the world from closing down. This will terminate the script engine instead.</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    console</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">warn</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;Canceled critical exception of type &quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> + </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">event</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">terminateReason</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// Print a message to the console if this event fires.</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>ScriptEvents</strong></p><p>ScriptEvents, not to be confused with world events or system events, allows us to respond to inbound <code class="shiki"><span>/scriptevent</span></code> commands by registering the <code class="shiki"><span>scriptEventReceive</span></code> event handler, which the event fires if a <code class="shiki"><span>/scriptevent</span></code> command is invoked by a player, NPC, or block. More information on this event can be found on the <a href="https://learn.microsoft.com/en-us/minecraft/creator/scriptapi/minecraft/server/scripteventcommandmessageafterevent" target="_blank" rel="noreferrer">Script Event Documentaion</a> page.</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span>/scriptevent &lt;messageId: string&gt; &lt;message: string&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code class="shiki"><span>messageId</span></code> in the scriptevent command can be received in API via <code class="shiki"><span>ScriptEventCommandMessageEvent.id</span></code></li><li><code class="shiki"><span>message</span></code> in the scriptevent command can be received in API via <code class="shiki"><span>ScriptEventCommandMessageEvent.message</span></code></li></ul><p><strong>Example</strong>:</p><p>Command input:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span>/scriptevent wiki:test Hello World</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>What the event listener returns:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">import</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> } </span><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> &quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">afterEvents</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">scriptEventReceive</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">subscribe</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">((</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">event</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">    const</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;">        id</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// returns string (wiki:test)</span></span>
<span class="line"><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;">        initiator</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// returns Entity (or undefined if an NPC did not fire the command)</span></span>
<span class="line"><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;">        message</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// returns string (Hello World)</span></span>
<span class="line"><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;">        sourceBlock</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// returns Block (or undefined if a block did not fire the command)</span></span>
<span class="line"><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;">        sourceEntity</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// returns Entity (or undefined if an entity did not fire the command)</span></span>
<span class="line"><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;">        sourceType</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// returns MessageSourceType (can be &#39;Block&#39;, &#39;Entity&#39;, &#39;NPCDialogue&#39;, or &#39;Server&#39;)</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    } = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">event</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="scheduling" tabindex="-1">Scheduling <a class="header-anchor" href="#scheduling" aria-label="Permalink to &quot;Scheduling&quot;">​</a></h2><p>We may decide to execute a function at a certain time in the future. This is known as &quot;scheduling a call&quot;.</p><p>In script API, native javascript methods like <code class="shiki"><span>setTimeout</span></code> and <code class="shiki"><span>setInterval</span></code> do not exist in the scripting engine. Minecraft has instead implemented their own scheduling methods that work using game ticks instead of real time.</p><p>These methods can be accessed from the <code class="shiki"><span>system</span></code> object obtained by importing:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">import</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> } </span><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> &quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>There are two methods for it:</p><p><strong>Scheduling timers</strong><code class="shiki"><span>system.run(callback)</span></code> - Runs a specified function at the next available future time. This is frequently used to implement delayed behaviors and game loops. When run within the context of an event handler, this will generally run the code at the end of the same tick where the event occurred. When run in other code (a system.run callout), this will run the function in the next tick. Note, however, that depending on load on the system, running in the same or next tick is not guaranteed.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">import</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> } </span><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> &quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">run</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(() </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">sendMessage</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;This runs one tick after the previous tick&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code class="shiki"><span>system.runInterval(callback: () =&gt; void, tickInterval?: number): number</span></code> - Runs a set of code repeatedly, starting after the first interval of time and repeating continuously forever that interval.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">import</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> } </span><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> &quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">runInterval</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(() </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">sendMessage</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;This message runs every 20 ticks (once per second)&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}, </span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">20</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code class="shiki"><span>system.runTimeout(callback: () =&gt; void, tickDelay?: number): number</span></code> - Runs a function once after the interval of time has elapsed.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">import</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> } </span><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> &quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">runTimeout</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(() </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">sendMessage</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;This message runs once once 20 ticks has passed.&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}, </span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">20</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code class="shiki"><span>system.runJob(generator: Generator&lt;void, void, void&gt;): number</span></code> - Queues a generator function to run until completion. The generator will be given a time slice each tick, and will be run until it yields or completes. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*" target="_blank" rel="noreferrer">Generator Function Reference</a>.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">import</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">BlockPermutation</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> } </span><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> &quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">function*</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;"> blockPlacingGenerator</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">size</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">startX</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">startY</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">startZ</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">) {</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">    const</span><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;"> overworld</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">getDimension</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;overworld&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// gets the dimension of type overworld.</span></span>
<span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">    for</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> (</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">let</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;"> x</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">startX</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">; </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">x</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> &lt; </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">startX</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> + </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">size</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">; </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">x</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">++) {</span></span>
<span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">        for</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> (</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">let</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;"> y</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">startY</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">; </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">y</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> &lt; </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">startY</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> + </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">size</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">; </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">y</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">++) {</span></span>
<span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">            for</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> (</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">let</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;"> z</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">startZ</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">; </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">z</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> &lt; </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">startZ</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> + </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">size</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">; </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">z</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">++) {</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">                const</span><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;"> block</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">overworld</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">getBlock</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">({ </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">x:</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;"> x</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">y:</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;"> y</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">z:</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;"> z</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> }); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// get the block at the current loop coordinates.</span></span>
<span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">                if</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> (</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">block</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">) </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">block</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">setType</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;minecraft:cobblestone&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// if the block is loaded, set it to cobblestone.</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">                // yield back to job coordinator after every block is placed</span></span>
<span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">                yield</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">            }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// builds a 10x10x10 cube of cobblestone starting at overworld location -2, -60, 1.</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">runJob</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">blockPlacingGenerator</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">10</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, -</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">2</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, -</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">60</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">1</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>Clearing timers</strong></p><p><code class="shiki"><span>system.clearRun(runId): void</span></code> - Cancels the execution of a function run that was previously scheduled via the <code class="shiki"><span>run</span></code>, <code class="shiki"><span>runTimeout</span></code> or <code class="shiki"><span>runInterval</span></code> function.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">import</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> } </span><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> &quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">const</span><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;"> callbackId</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">runInterval</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(() </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">sendMessage</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;Running every tick&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">runTimeout</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(() </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">clearRun</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">callbackId</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// stops the system.runInterval callback from running after 20 ticks</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">sendMessage</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;Stopped&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}, </span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">20</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code class="shiki"><span>clearJob(jobId: number): void</span></code> - Cancels the execution of a job queued via the <code class="shiki"><span>runJob</span></code> function.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">import</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> } </span><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> &quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">const</span><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;"> callbackId</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">runInterval</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(() </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">sendMessage</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;Running every tick&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">runTimeout</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(() </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">clearRun</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">callbackId</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// stops the system.runInterval callback from running after 20 ticks</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">sendMessage</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;Stopped&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}, </span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">20</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>More information on all the system methods can be found on the <a href="https://learn.microsoft.com/en-us/minecraft/creator/documents/systemrunguide" target="_blank" rel="noreferrer">Game Loops &amp; Timed Callbacks</a> documentation page.</p><h2 id="saving-and-loading-data" tabindex="-1">Saving and Loading data <a class="header-anchor" href="#saving-and-loading-data" aria-label="Permalink to &quot;Saving and Loading data&quot;">​</a></h2><p>With the <code class="shiki"><span>@minecraft/server</span></code> module, developers can define their own custom properties, known as dynamic properties, that can be used and stored within Minecraft. This data is stored specifically in the world&#39;s <code class="shiki"><span>db</span></code> folder using the behavior pack header UUID.</p><p><img src="`+r+`" alt="dynamic_properties"></p><p>In order to save data, the property must first be initialized. There are multiple ways to declare dynamic properties, either on an entity, world, or item. You can define as many numbers and booleans as you would like, however Minecraft API only allows each - behavior pack to save a limited amount of data per dynamic property.</p><ul><li>String dynamic properties can be a maximum of 32767 characters in length.</li><li>Number dynamic properties can be a maximum of the 64-bit float limit (-1.7976931348623158e+308 to -2.2250738585072014e-308, or from 2.2250738585072014e-308 to 1.7976931348623158e+308).</li></ul><p><strong>Get and Set Dynamic Properties</strong></p><p>To get and set dynamic properties, you can use the <code class="shiki"><span>getDynamicProperty</span></code> and <code class="shiki"><span>setDynamicProperty</span></code> methods.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>It is important to note that getting a dynamic property does not guarantee it has a value saved. When getting the property for the first time, the method returns <code class="shiki"><span>undefined</span></code>.</p></div><p>With this in mind, here are some examples of how to get and set dynamic properties in Minecraft:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">import</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> } </span><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> &quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">runInterval</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(() </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">getPlayers</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">().</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">forEach</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">((</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">player</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">        // run code for each player the array returns.</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">        // all three properties are unique to each player, similar to tags/scoreboard data.</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">        player</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">setDynamicProperty</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;number_value&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">12</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// sets a number property on the player.</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">        player</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">setDynamicProperty</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;string_value&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;This is a string :)&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// string property</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">        player</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">setDynamicProperty</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;boolean_value&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">true</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// boolean property</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    });</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}, </span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">20</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// run this interval once every 20 game ticks.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">afterEvents</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">playerBreakBlock</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">subscribe</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">((</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">data</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">    // subscribe to the block break event.</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">    const</span><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;"> player</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">data</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">player</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">; </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// define the player variable for use later.</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">    const</span><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;"> numberProperty</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">player</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">getDynamicProperty</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;number_value&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// get the dynamic property that was saved.</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    player</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">sendMessage</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">\`You have a property of value </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">\${</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">numberProperty</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">}</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">!\`</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// print the players saved value to the chat.</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>Here is an example of how to get and set dynamic properties at the global level:</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">import</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> } </span><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> &quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">setDynamicProperty</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;player_score&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">100</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// set a property with a number value</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">const</span><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;"> playerScore</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> = </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">getDynamicProperty</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;player_score&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">); </span><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">// get the previously set property- will return 100.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="running-commands" tabindex="-1">Running Commands <a class="header-anchor" href="#running-commands" aria-label="Permalink to &quot;Running Commands&quot;">​</a></h2><p><code class="shiki"><span>Entity.runCommandAsync()</span></code> or <code class="shiki"><span>Dimension.runCommandAsync()</span></code> allows the API to run a particular command asynchronously from the context of the broader dimension. Note that there is a maximum of 128 asynchronous commands that can be run in a given tick. Always try to avoid runCommandAsync calls wherever possible, and use built-in API methods instead.</p><p>The game executes the queued commands in the next tick of the world. To run commands parallel with the script, you have to surround your code in a asynchronous function.</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">import</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> } </span><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;"> &quot;@minecraft/server&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">async</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> () </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">=&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">    await</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;"> world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">getDimension</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;overworld&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">).</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">runCommandAsync</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;say Using say command on dimension.&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">    world</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">sendMessage</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;This runs after runCommandAsync is executed&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">})();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Returns a <code class="shiki"><span>Promise&lt;CommandResult&gt;</span></code>. Throws an error <strong>synchronously</strong> if the queue is full.</p><p><strong>Avoid run commands in script</strong></p><p>Normally we recommend avoiding using commands because it&#39;s slow to run a command from the Script API, and server performance starts to slow down as more commands are executed over time. However, the following command features are not implemented in scripting API, which leaves us no choice but to use <code class="shiki"><span>runCommand</span></code> or <code class="shiki"><span>runCommandAsync</span></code>.</p><p><strong>Ender chest</strong></p><p>The Script API does not provide any methods to get/set information of player&#39;s ender chest. Commands such as <code class="shiki"><span>/replaceitem</span></code>, <code class="shiki"><span>/clear</span></code>, <code class="shiki"><span>@s[hasitem=]</span></code> may be used as a workaround.</p><p><strong>tickingarea</strong></p><p>Script API cannot access, set, or remove ticking areas.</p><p><strong>kick</strong></p><p>Script API cannot kick players.</p><p><strong>setblock</strong></p><p>Script API cannot destroy blocks <code class="shiki"><span>/setblock ... destroy</span></code>. It is possible to set a block, however.</p><p><strong>Player abilities</strong></p><ul><li>Script API cannot set abilities for each player.</li><li>You cannot read player abilities.</li></ul><p><strong>execute</strong></p><p>Script API can utilize new execute syntax to run commands with lots of if/unless conditions for simplicity or performance.</p><p><code class="shiki"><span>/execute</span></code> can be used to trigger the <code class="shiki"><span>/loot</span></code> command, as <code class="shiki"><span>runCommandAsync</span></code> cannot access vanilla loot tables directly.</p><p><strong>Minecraft functions</strong></p><ul><li>Script API cannot run Minecraft function files without the use of <code class="shiki"><span>/function</span></code>.</li></ul><p><strong>locate</strong></p><ul><li>Script API cannot get a structure location.</li><li>Cannot get a biome location.</li></ul><p><strong>loot</strong></p><ul><li>Script API even though the loot is broken from the start, but it&#39;s useful for drop or set the item to players/world.</li></ul><p><strong>weather</strong></p><ul><li>Script API cannot get/set the world weather.</li></ul><p><strong>difficulty</strong></p><ul><li>Script API cannot set the world difficulty.</li></ul><p><strong>mobevent</strong></p><ul><li>Script API cannot enable/disable mobevents.</li></ul><p><strong>fog</strong></p><ul><li>Script API cannot manage active fog settings for players.</li></ul><p><strong>stopsound</strong></p><ul><li>Script API cannot stop playing a sound. Music can be stopped using <code class="shiki"><span>World::stopMusic()</span></code> or <code class="shiki"><span>Player::stopMusic()</span></code>.</li></ul><p><strong>dialogue</strong></p><ul><li>The Script API can&#39;t open the NPC dialogue to the player.</li><li>It cannot change the dialogue displayed by an NPC.</li></ul>`,92))])}const b=n(d,[["render",o]]);export{C as __pageData,b as default};
