import{_ as e,E as n,j as t,k as l,a5 as i,A as p,I as h,J as r}from"./chunks/framework.3Z9w-w8R.js";const y=JSON.parse('{"title":"Preserve Title Texts","description":"Learn how to create reusable UI elements that preserve binding data, updating only when a specific keyword is detected in the data.","frontmatter":{"title":"Preserve Title Texts","description":"Learn how to create reusable UI elements that preserve binding data, updating only when a specific keyword is detected in the data.","category":"Tutorials","tags":["intermediate"],"mentions":["shanewolf38","SmokeyStack","pedrodenovo"]},"headers":[{"level":2,"title":"Overview","slug":"overview","link":"#overview","children":[]},{"level":2,"title":"The Reusable Component","slug":"the-reusable-component","link":"#the-reusable-component","children":[{"level":3,"title":"The Code","slug":"the-code","link":"#the-code","children":[]},{"level":3,"title":"How It Works","slug":"how-it-works","link":"#how-it-works","children":[{"level":4,"title":"The data_control Logic","slug":"the-data-control-logic","link":"#the-data-control-logic","children":[]},{"level":4,"title":"The preserved_title_display Binding","slug":"the-preserved-title-display-binding","link":"#the-preserved-title-display-binding","children":[]}]}]}],"relativePath":"json-ui/preserve-title-texts.md","filePath":"json-ui/preserve-title-texts.md"}'),o={name:"json-ui/preserve-title-texts.md"};function d(k,s,c,u,g,D){const a=n("CodeHeader");return l(),t("div",null,[s[1]||(s[1]=i('<p>In this tutorial, you will learn how to create a robust and reusable UI component that preserves binding data. The element will listen for incoming data (like a title or subtitle) and only update its display when that data contains a specific keyword, ignoring all other data.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>Passing data to the UI via titles, subtitles, or scoreboards is a very common technique. However, you often need a UI element to only react to specific information, not every single title command that is run.</p><p>This guide demonstrates how to build a component that &quot;listens&quot; for a keyword. When it sees it, it saves the associated text and displays it. The key is creating a component that is self-contained and can be used multiple times on the same screen without conflicts.</p><p>The old methods for this often had bugs or used <code class="shiki"><span>global</span></code> variables, which is not ideal for reusable components. The method below uses a <strong><code class="shiki"><span>property_bag</span></code></strong> to ensure each component instance has its own local &quot;memory&quot;, making it truly modular.</p><h2 id="the-reusable-component" tabindex="-1">The Reusable Component <a class="header-anchor" href="#the-reusable-component" aria-label="Permalink to &quot;The Reusable Component&quot;">​</a></h2><p>The following JSON creates a <code class="shiki"><span>label</span></code> element that is controlled by a hidden child panel. This panel handles all the logic for detecting the keyword, saving the text, and making it available to the parent label.</p><h3 id="the-code" tabindex="-1">The Code <a class="header-anchor" href="#the-code" aria-label="Permalink to &quot;The Code&quot;">​</a></h3><p>This code can be placed in any UI screen file, such as <code class="shiki"><span>hud_screen.json</span></code>.</p>',9)),p(a,null,{default:h(()=>s[0]||(s[0]=[r("RP/ui/hud_screen.json")])),_:1}),s[2]||(s[2]=i(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">&quot;preserved_title_display&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;$update_string&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;update&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;type&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;label&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;text&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;#text&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;controls&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;data_control&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;type&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;panel&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;size&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">0</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">0</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">],</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;property_bag&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                    &quot;#preserved_text&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                },</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                &quot;bindings&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                        &quot;binding_name&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;#hud_title_text_string&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    },</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                        &quot;binding_name&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;#hud_title_text_string&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                        &quot;binding_name_override&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;#preserved_text&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                        &quot;binding_condition&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;visibility_changed&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    },</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                        &quot;binding_type&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;view&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                        &quot;source_property_name&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;(not (#hud_title_text_string = #preserved_text) and not ((#hud_title_text_string - $update_string) = #hud_title_text_string))&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">                        &quot;target_property_name&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;#visible&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                    }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">                ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">            }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    ],</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;bindings&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        {</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;binding_type&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;view&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;source_control_name&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;data_control&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;source_property_name&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;(#preserved_text - $update_string)&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">            &quot;target_property_name&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;#text&quot;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">        }</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">    ]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="how-it-works" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How It Works&quot;">​</a></h3><p>This component is divided into two main parts: the visible <strong><code class="shiki"><span>label</span></code></strong> (<code class="shiki"><span>preserved_title_display</span></code>) and a hidden <strong><code class="shiki"><span>panel</span></code></strong> (<code class="shiki"><span>data_control</span></code>) that acts as the brain.</p><h4 id="the-data-control-logic" tabindex="-1">The <code class="shiki"><span>data_control</span></code> Logic <a class="header-anchor" href="#the-data-control-logic" aria-label="Permalink to &quot;The \`data_control\` Logic&quot;">​</a></h4><p>This invisible panel does all the heavy lifting.</p><ol><li><p><strong><code class="shiki"><span>property_bag</span></code></strong>: This is the key to making the component reusable.</p><ul><li><code class="shiki"><span>&quot;#preserved_text&quot;: &quot;&quot;</span></code> creates and initializes a <strong>local variable</strong> called <code class="shiki"><span>#preserved_text</span></code>.</li><li>Because it&#39;s not <code class="shiki"><span>global</span></code>, every instance of <code class="shiki"><span>preserved_title_display</span></code> gets its own private <code class="shiki"><span>#preserved_text</span></code>, so they don&#39;t interfere with each other. This fixes the major flaw in older methods.</li></ul></li><li><p><strong><code class="shiki"><span>visibility_changed</span></code> Binding</strong>: This binding is the trigger for saving data. When the <code class="shiki"><span>data_control</span></code> panel&#39;s visibility changes, it instantly copies the current title (<code class="shiki"><span>#hud_title_text_string</span></code>) into our local <code class="shiki"><span>#preserved_text</span></code> variable.</p></li><li><p><strong>Visibility Condition</strong>: This binding makes the panel &quot;flicker&quot; (become visible for a single frame) only when the right conditions are met. Both must be true:</p><ul><li><code class="shiki"><span>not (#hud_title_text_string = #preserved_text)</span></code>: Is the incoming title <strong>different</strong> from the one we already have saved? (Prevents running on the same title).</li><li><code class="shiki"><span>not ((#hud_title_text_string - $update_string) = #hud_title_text_string)</span></code>: Does the incoming title <strong>contain</strong> our keyword (<code class="shiki"><span>$update_string</span></code>)?</li></ul></li></ol><p>When a new title with the keyword arrives, the panel becomes visible, <code class="shiki"><span>visibility_changed</span></code> fires and saves the text, and then the visibility condition immediately becomes false again, hiding the panel.</p><h4 id="the-preserved-title-display-binding" tabindex="-1">The <code class="shiki"><span>preserved_title_display</span></code> Binding <a class="header-anchor" href="#the-preserved-title-display-binding" aria-label="Permalink to &quot;The \`preserved_title_display\` Binding&quot;">​</a></h4><p>The main label element has a simple job. It just reads the text from its child <code class="shiki"><span>data_control</span></code>.</p><ul><li><code class="shiki"><span>&quot;source_control_name&quot;: &quot;data_control&quot;</span></code>: Tells the label to look at its child for data.</li><li><code class="shiki"><span>source_property_name</span></code>: <code class="shiki"><span>(#preserved_text - $update_string)</span></code>: It takes the text saved in our local <code class="shiki"><span>#preserved_text</span></code> variable and removes the keyword (<code class="shiki"><span>$update_string</span></code>) before displaying it.</li></ul><p>This creates a clean, efficient, and fully reusable component for your UI.</p>`,11))])}const m=e(o,[["render",d]]);export{y as __pageData,m as default};
