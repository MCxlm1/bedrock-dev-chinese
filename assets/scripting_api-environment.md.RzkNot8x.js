import{_ as e,E as t,j as n,k as l,a5 as s,A as h,I as o,J as r}from"./chunks/framework.3Z9w-w8R.js";const D=JSON.parse('{"title":"Engine Environment","description":"Minecraft Bedrock scripting engine environment.","frontmatter":{"title":"Engine Environment","description":"Minecraft Bedrock scripting engine environment.","category":"Documentation","mentions":["conmaster2112","JaylyDev","ThomasOrs","MuhammadRestu999","QuazChick","MinecraftBedrockArabic","8Crafter"]},"headers":[{"level":2,"title":"Common Problems","slug":"common-problems","link":"#common-problems","children":[{"level":3,"title":"Timeout Support","slug":"timeout-support","link":"#timeout-support","children":[]},{"level":3,"title":"Eval Support","slug":"eval-support","link":"#eval-support","children":[]}]},{"level":2,"title":"Support","slug":"support","link":"#support","children":[]},{"level":2,"title":"JavaScript Engine Update History","slug":"javascript-engine-update-history","link":"#javascript-engine-update-history","children":[]}],"relativePath":"scripting/api-environment.md","filePath":"scripting/api-environment.md"}'),d={name:"scripting/api-environment.md"};function k(c,i,p,g,C,y){const a=t("CodeHeader");return l(),n("div",null,[i[1]||(i[1]=s('<p>Minecraft: Bedrock Edition uses its own version of JavaScript, which is based on QuickJS. It uses the ECMAScript module (ESM) system for organizing and loading code, which allows for a more modular and organized approach to writing scripts for the game.</p><h2 id="common-problems" tabindex="-1">Common Problems <a class="header-anchor" href="#common-problems" aria-label="Permalink to &quot;Common Problems&quot;">​</a></h2><h3 id="timeout-support" tabindex="-1">Timeout Support <a class="header-anchor" href="#timeout-support" aria-label="Permalink to &quot;Timeout Support&quot;">​</a></h3><p>What people often run into when starting out with Minecraft Scripting is the problem with timing. The standards for timing code, as you may know, are the <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">setTimeout</span></code> and <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">setInterval</span></code> functions and their cancel functions.</p><p>These standardized methods are used by the frame system where you can set the delay to millisecond precision, but minecraft uses a tick to process changes in the world. That&#39;s why these methods are not and will not be available.</p><p>Minecraft instead uses the <a href="https://learn.microsoft.com/minecraft/creator/scriptapi/minecraft/server/system#runtimeout" target="_blank" rel="noreferrer"><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">runTimeout</span></code></a> and <a href="https://learn.microsoft.com/minecraft/creator/scriptapi/minecraft/server/system#runinterval" target="_blank" rel="noreferrer"><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">system</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">runInterval</span></code></a> system methods, first added in version 1.19.70, which delay to the precision of one tick. You can read more about this in <a href="/scripting/script-server#scheduling">our tutorial</a> or on <a href="https://learn.microsoft.com/minecraft/creator/scriptapi/minecraft/server/system" target="_blank" rel="noreferrer">Microsoft Learn</a>.</p><h3 id="eval-support" tabindex="-1">Eval Support <a class="header-anchor" href="#eval-support" aria-label="Permalink to &quot;Eval Support&quot;">​</a></h3><p>Not everyone can encounter this problem because the use of eval and Function method for running code in string format is not great.</p><p>Some browsers also prohibit the use of these methods, mainly the eval method, as when using eval there is a risk of malicious code which is why it is disabled by default.</p><p>To enable these methods that evaluate code, you must add it in the manifest. This capability also adds the usage of the <code class="shiki"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">Function</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">()</span></code> constructor.</p>',10)),h(a,null,{default:o(()=>i[0]||(i[0]=[r("BP/manifest.json")])),_:1}),i[2]||(i[2]=s(`<div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes dark-plus light-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">{</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#0451A5;">    &quot;capabilities&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">: [</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;script_eval&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="support" tabindex="-1">Support <a class="header-anchor" href="#support" aria-label="Permalink to &quot;Support&quot;">​</a></h2><ul><li><p><strong><em>What is supported</em></strong></p><ul><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">BigInt</span></code> – Global support for arbitrary-precision integers (e.g. <code class="shiki"><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">123</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">n</span></code>).</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Object</span></code> - Standard function constructor for objects</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Function</span></code> - Standard function constructor for functions. Note that to use this the <code class="shiki"><span>script_eval</span></code> capability must be added to the pack manifest.</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Error</span></code> - (<code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">EvalError</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">RangeError</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">ReferenceError</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">SyntaxError</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">TypeError</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">URIError</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">InternalError</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">AggregateError</span></code>) - Classes for error construction</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Array</span></code> - (<code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Int8Array</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">UInt8Array</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Int16Array</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">UInt16Array</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Int32Array</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">UInt32Array</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Float32Array</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Float64Array</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">SharedArrayBuffer</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">ArrayBuffer</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">UInt8ClampedArray</span></code>) Standard function constructor for Array objects</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">parseInt</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">parseFloat</span></code> - Standard methods for parsing string to number</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">isNaN</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">isFinite</span></code> - Standard methods for checking number types</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">decodeURI</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">encodeURI</span></code> - Standard methods for decoding and encoding URI paths</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">decodeURIComponent</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">encodeURIComponent</span></code> - Standard methods for decoding and encoding URI components</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">escape</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">unescape</span></code> - Non-standard methods! Please use decodeURI/encodeURI if possible</li><li><code class="shiki"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">NaN</span></code>, <code class="shiki"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">Infinity</span></code>, <code class="shiki"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">undefined</span></code> - Standard variables for in-code usage</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">__date_clock</span></code> - Built-in QuickJS method for getting current time in microseconds</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Number</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Boolean</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">String</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Symbol</span></code> - Standard function constructor for JS primitives</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Math</span></code> - Standard object having primary math functions, such as trig ratios &amp; powers</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Reflect</span></code> - Standard object having built-in methods</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">eval</span></code> - Standard method for evaluating string as code. Note that to use this the <code class="shiki"><span>script_eval</span></code> capability must be added to the pack manifest.</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">globalThis</span></code> - Standard object with access to global scoped variables</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Date</span></code> - Standard function constructor for date instance</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">RegExp</span></code> - Standard function constructor for regex instance</li><li><code class="shiki"><span style="--shiki-dark:#4FC1FF;--shiki-light:#0070C1;">JSON</span></code> - Standard object having stringify and parse methods for JSON interaction</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Proxy</span></code> - Standard function constructor for build-in proxy handler</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Map</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Set</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">WeakMap</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">WeakSet</span></code> - Standard function constructors for data organisation objects</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">DataView</span></code> - Standard function constructor for binary array interactions</li><li><code class="shiki"><span style="--shiki-dark:#4EC9B0;--shiki-light:#267F99;">Promise</span></code> - Standard function constructor for async interaction</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">console</span></code> - Standard object having base output methods (<code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">log</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">warn</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">error</span></code>, <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">info</span></code>)</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">print</span></code> - Alias of <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">console</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">log</span></code></li></ul></li><li><p><strong><em>What is not supported</em></strong></p><ul><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">setTimeout</span></code> - Standard function for timing code runs</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">setInterval</span></code> - Standard function for timing code runs in intervals</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">clearTimeout</span></code> - Standard function for canceling setTimeout runs</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">clearInterval</span></code> - Standard function for canceling setInterval runs</li></ul></li><li><p><strong>Extended Methods</strong></p><p>We have bunch of additional methods exposed by QuickJS, but do not expect anything game-changing!</p><p>We do have some additional string methods to wrap string in html formats. For example: <code class="shiki"><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;text&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">bolt</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">()</span></code> → <code class="shiki"><span style="--shiki-dark:#808080;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#569CD6;--shiki-light:#800000;">b</span><span style="--shiki-dark:#808080;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">text</span><span style="--shiki-dark:#808080;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#569CD6;--shiki-light:#800000;">b</span><span style="--shiki-dark:#808080;--shiki-light:#800000;">&gt;</span></code>. These methods are useless and not documented and we are not going to either.</p></li></ul><h2 id="javascript-engine-update-history" tabindex="-1">JavaScript Engine Update History <a class="header-anchor" href="#javascript-engine-update-history" aria-label="Permalink to &quot;JavaScript Engine Update History&quot;">​</a></h2><ul><li><p><strong><em>1.21 (Tricky Trials)</em></strong></p><ul><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">BigInt</span></code> – Global support for arbitrary-precision integers (e.g. <code class="shiki"><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658;">123</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">n</span></code>).</li><li><code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">Object</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">hasOwn</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">obj</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">prop</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">)</span></code> – Checks if <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">obj</span></code> has its own property <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">prop</span></code>.</li><li><code class="shiki"><span style="--shiki-dark:#4EC9B0;--shiki-light:#267F99;">Array</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">prototype</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">findLast</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">callbackFn</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">, </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">thisArg</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">?)</span></code> – Returns the last item matching the condition.</li><li><code class="shiki"><span style="--shiki-dark:#4EC9B0;--shiki-light:#267F99;">Array</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">prototype</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">.</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">at</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">index</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">)</span></code> – Returns the element at the given <code class="shiki"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">index</span></code>.</li></ul></li></ul>`,5))])}const m=e(d,[["render",k]]);export{D as __pageData,m as default};
